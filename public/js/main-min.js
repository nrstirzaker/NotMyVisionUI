var ip="",pageSize=16,firstItem=0;$(document).ready(function(){addNavButtonCode(),$.getJSON("https://jsonip.com/?callback=?",function(t){ip=t.ip});$("#layout");$.ajax({url:"/api/tweets",method:"get",success:function(t){generatePage(t)}})});var addNavButtonCode=function(){$("#btn-back").click(function(){$.ajax({url:"/api/tweets?back="+firstItem,method:"get",success:function(t){generatePage(t)}})}),$("#btn-forward").click(function(){$.ajax({url:"/api/tweets?forward="+firstItem,method:"get",success:function(t){generatePage(t)}})})},generatePage=function(t){if(0!==t.length){JSON.stringify(t);var e=[];firstItem=t[0].pageIndex,$.each(t,function(t,i){var a={};a.url=i.mediaUrl,a.thumbHeight=i.sizes[0].small.h,a.thumbWidth=i.sizes[0].small.w,a.largeHeight=i.sizes[0].large.h,a.largeWidth=i.sizes[0].large.w,a.tweetId=i.tweetId;a.url,a.url;e.push(a)}),justifyPhotos(e),addLightBox(),addDeleteEvents()}},justifyPhotos=function(t){$(".layout").empty().justifiedImages({images:t,rowHeight:200,maxRowHeight:400,thumbnailPath:function(t,e,i){return t.url},template:function(t){var e=t.displayWidth;return'<div class="photo-container" style="height:'+t.displayHeight+"px;margin-right:"+t.marginRight+'px;">'+('<img class="image-thumb" src="'+t.url+'" style="width:'+e+"px;height:"+t.displayHeight+'px;" >')+('<div class="overlay"><a href="'+t.url+'"><span class="glyphicon glyphicon-fullscreen" aria-hidden="true"></span></a><span id="'+t.tweetId+'" class="glyphicon glyphicon-remove" aria-hidden="true"></span></div>')+"</div>"},getSize:function(t){return{width:t.thumbWidth,height:t.thumbHeight}},margin:1})},addLightBox=function(){$(".overlay a").each(function(t){var e=$(this).parent().parent().children("a").attr("href");$(this).parent().parent().children("a").colorbox({photo:"false",title:function(){return'<a href="'+e+'" target="_blank">Open In New Window</a>'}})})},addDeleteEvents=function(){$(".glyphicon-remove").each(function(){$(this).click(function(){var t=this.id;$.ajax({url:"/api/tweet",method:"DELETE",data:{tweetId:t,ip:ip},success:function(t){location.reload()},fail:function(t){console.log(t)}})})})};